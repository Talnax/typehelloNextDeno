var th=th||{};th.next=th.next||{};
th.next.htmAnalysis=function(a){function u(){c=this;this.listExcludeWords=[];this.cssClassHub=".html-analysis-hub";c.howManyWordsForPhrase=9;this.activeUrl=document.location.href;this.localPageData={};this.webPageData=[];this.dlgLabAnalysis=null;this.setPageElements();this.activePanel="";this.feedbackClass=".html-analysis-hub-dlg-feedback";this.hubStatus=statusHub.not_active;this.commonHub=new th.next.CommonHub(this);this.Initialize()}function w(a){try{a.preventDefault();var b=a.target.getAttribute("data-action");
if("function"===typeof c[b])c[b]();return!1}catch(g){return console.log("htmAnalysis.onAnalysisMainMenu_Click(): "+g),!1}}function f(p){try{p.preventDefault();var b=a("#th-input-exclude-words").val().trim();c.listExcludeWords=b.split(" ");if(0!==c.listExcludeWords.length)return c.activeUrl!==document.location.href?q(c.activeUrl):t(function(a,p,b){a||B(p,b)}),!1}catch(g){return console.log("htmAnalysis.onExcludeWords_Click(): "+g),!1}}function h(a){try{a.preventDefault();var b=a.target.getAttribute("data-action");
if("function"===typeof c[b])c[b]();return!1}catch(g){return console.log("htmAnalysis.onShowAnalysisContent_Click(): "+g),!1}}function e(p){try{p.preventDefault();var b=a("#th-input-url-analysis").val().trim();isURL(b)&&q(b);return!1}catch(c){return console.log("htmAnalysis.onUrlDynamic_Click(): "+c),!1}}function d(){try{return event.preventDefault(),a(".clean-text-section").css("display","none"),v(!0),!1}catch(p){return console.log("htmAnalysis.onAnalysisMainMenu_Click(): "+p),!1}}function l(){try{return event.preventDefault(),
a(".raw-text-section").css("display","none"),v(!0),!1}catch(p){return console.log("htmAnalysis.onCloseRawContentText_Click(): "+p),!1}}function k(a){try{var b=a.target,c="+"===b.innerHTML?!0:!1;b.innerHTML="-"===b.innerHTML?"+":"-";D(c)}catch(m){console.log("ERROR[NewsHub.onBtnExpander_Click()]: "+m)}}function q(a){try{c.activeUrl=a;var b=x(a);if(b)return r(b.text),!1;c.showProgressBar(!0);ctrlHtmlAnalysis.getPureTextPerUrl(a,function(b,g){c.showProgressBar(!1);b||(g=decodeURIComponent(JSON.parse(g).param),
null===x(a)&&c.webPageData.push({url:a,text:g}),r(g))})}catch(g){console.log("htmlAnalysis.prepareDynamicAnalysis(): "+g)}}function r(p){try{c.listExcludeWords=a("#th-input-exclude-words").val().trim().split(" "),s(p,function(a,b){a||B(b,p)})}catch(b){return console.log("htmlAnalysis.runDynamicAnalysis(): "+b),null}}function s(p,b){try{var g=p.split(" "),m=ctrlHtmlAnalysis.frequencyWords(g);0<c.listExcludeWords.length&&(m=m.filter(function(a){for(var b=0;b<c.listExcludeWords.length;b++)if(a.name===
c.listExcludeWords[b])return!1;return!0}));var E=m.length>c.howManyWordsForPhrase?c.howManyWordsForPhrase:m.length,y=a(".content-panel table.word-table tbody");y.find("tr").remove();for(g=0;g<E;g++){var e=m[g],h=a("<tr><th>"+g+"</th><td>"+e.name+"</td><td>"+e.count+"</td><td>"+e.freq+"</td></tr>");y.append(h)}a(".content-panel .word-section .word-links-val").text("["+m.length+"]");return b(!1,m)}catch(d){return console.log("htmlAnalysis.setDynamicContentInfo(): "+d),b(!0,null)}}function z(){try{var a=
null;if(0===Object.keys(c.localPageData).length){var b=ctrlHtmlAnalysis.getHtmlContent().toLowerCase();b&&(b=ctrlHtmlAnalysis.removeEditingCharacters(b))&&(b=ctrlHtmlAnalysis.cleanFromPunctuation(b).join(" "))&&(a=ctrlHtmlAnalysis.removeRussianPrepositions(b))&&(c.localPageData.url=c.activeUrl,c.localPageData.text=a)}else a=c.localPageData.text;return a}catch(g){return console.log("ERROR(htmlAnalysis.getPureWordContentInfo()): "+g),null}}function t(p){try{var b=z();if(!b)return p(!0,null);var g=b.split(" "),
m=ctrlHtmlAnalysis.frequencyWords(g);0<c.listExcludeWords.length&&(m=m.filter(function(a){for(var b=0;b<c.listExcludeWords.length;b++)if(a.name===c.listExcludeWords[b])return!1;return!0}));var e=m.length>c.howManyWordsForPhrase?c.howManyWordsForPhrase:m.length,y=a(".content-panel table.word-table tbody");y.find("tr").remove();for(g=0;g<e;g++){var h=m[g],d=a("<tr><th>"+g+"</th><td>"+h.name+"</td><td>"+h.count+"</td><td>"+h.freq+"</td></tr>");y.append(d)}a(".content-panel .word-section .word-links-val").text("["+
m.length+"]");return p(!1,m,b)}catch(k){return console.log("ERROR(htmlAnalysis.setLocalContentInfo()): "+k),p(!0,null)}}function v(c){try{c=c?"block":"none",a(".tables-analysis-result").css("display",c),a(".analysis-tools-section").css("display",c)}catch(b){console.log("htmAnalysis.showAnalysesContentPanel(): "+b)}}function D(c){try{c=c?"block":"none",a(".analysis-panel .analysis-tools").css("display",c)}catch(b){console.log("htmAnalysis.showAnalysesContentPanel(): "+b)}}function x(a){try{var b=null;
if(1>c.webPageData.length)return b;for(var g in c.webPageData)if(c.webPageData.hasOwnProperty(g)){var m=c.webPageData[g];if(m.url===a){b=m;break}}return b}catch(e){return console.log("htmlAnalysis.checkWebPageData(): "+e),null}}function B(c,b){try{var g=[],m=[];c.forEach(function(a){2<a.count&&(m.push(a),g.push(a.name))});var g=g.slice(0,6),e=ctrlHtmlAnalysis.shuffle(g),h=ctrlHtmlAnalysis.phrasesFromWords(e),d=ctrlHtmlAnalysis.frequencyPhrases(b,h);d.sort(function(a,b){return b.frequency-a.frequency});
var k=a(".content-panel .tables-analysis-result .phrase-section");if(0<d.length){var l=9<d.length?9:d.length,f=a(".content-panel table.phrase-table tbody");f.find("tr").remove();for(e=0;e<l;e++){var q=d[e],r=a("<tr><th>"+e+"</th><td>"+q.phrase+"</td><td>"+q.frequency+"</td></tr>");f.append(r)}k.css("display","block");k.find(".phrase-links-val").text("["+d.length+"]")}else k.css("display","none")}catch(n){console.log("ERROR(htmAnalysis.setPhraseContentInfo()): "+n)}}function F(){try{var c=a(".links-panel table.href-table-links tbody");
c.find("tr").remove();for(var b=a("html").clone(),g=a(b).find("script,noscript,style").remove().end(),m=a(g).find(".th-node").remove().end().html(),e=a(m).find("a"),h=[].slice.call(e).map(function(b){return{href:a(b).attr("href"),type:void 0===a(b).attr("type")?"-":a(b).attr("type"),name:void 0===a(b).attr("name")?"-":a(b).attr("name"),target:void 0===a(b).attr("target")?"-":a(b).attr("target"),title:void 0===a(b).attr("title")?"-":a(b).attr("title"),text:""===a(b).text()?"-":a(b).text()}}),b=0;b<
h.length;b++){var d=h[b];c.append("<tr><th><a href='"+d.href+"' >"+d.href+"</a></th><td>"+d.type+"</td><td>"+d.name+"</td><td>"+d.target+"</td><td>"+d.title+"</td><td>"+d.text+"</td></tr>")}a(".links-panel .href-section .href-links-val").text("["+h.length+"]")}catch(k){console.log("ERROR(htmAnalysis.setHrefSection()): "+k)}}function G(c){try{var b=a(".links-panel table.img-table-links tbody");b.find("tr").remove();var g=c.getElementsByTagName("img"),e=[].slice.call(g).map(function(b){return{src:a(b).attr("src"),
height:void 0===a(b).attr("height")?"-":a(b).attr("height"),width:void 0===a(b).attr("width")?"-":a(b).attr("width"),ismap:void 0===a(b).attr("ismap")?"-":a(b).attr("ismap"),alt:void 0===a(b).attr("alt")?"-":a(b).attr("alt"),usemap:void 0===a(b).attr("usemap")?"-":a(b).attr("usemap"),text:""===a(b).text()?"-":a(b).text()}});for(c=0;c<e.length;c++){var d=e[c];b.append("<tr><th><a href='"+d.src+"' >"+d.src+"</a></th><td>"+d.height+"</td><td>"+d.width+"</td><td>"+d.ismap+"</td><td>"+d.alt+"</td><td>"+
d.usemap+"</td></tr>")}a(".links-panel .img-section .image-links-val").text("["+e.length+"]")}catch(h){console.log("ERROR(htmAnalysis.setUIEvents()): "+h)}}function H(c){try{var b=a(".links-panel table.video-table-links tbody");b.find("tr").remove();var g=c.getElementsByTagName("video"),e=[].slice.call(g);c=[];for(g=0;g<e.length;g++){var d=e[g],h="-",k=a(d).attr("src");if(void 0===k){var l=a(d).find("source");if(void 0!=l)var f=[].slice.call(l),k=f.reduce(function(b,c){var d=void 0===a(c).attr("src")?
"-":a(c).attr("src");return b+(""===b?d:", "+d)},""),h=f.reduce(function(b,c){var d=void 0===a(c).attr("type")?"-":a(c).attr("type");return b+(""===b?d:", "+d)},"")}var q={src:k,type:h,height:void 0===a(d).attr("height")?"-":a(d).attr("height"),width:void 0===a(d).attr("width")?"-":a(d).attr("width"),poster:void 0===a(d).attr("poster")?"-":a(d).attr("poster"),preload:void 0===a(d).attr("preload")?"-":a(d).attr("preload"),text:""===a(d).text()?"-":a(d).text()};c.push(q)}for(e=0;e<c.length;e++)d=c[e],
tr_el="<tr><th><a href='"+d.src+"' >"+d.src+"</a></th><td>"+d.type+"</td><td>"+d.height+"</td><td>"+d.width+"</td><td>"+d.poster+"</td><td>"+d.preload+"</td></tr>",b.append(tr_el);a(".links-panel .video-section .video-links-val").text("["+c.length+"]")}catch(r){console.log("ERROR(htmAnalysis.setVideoSection()): "+r)}}function I(){try{var c=a(".links-panel table.script-table-links tbody");c.find("tr").remove();for(var b=document.getElementsByTagName("script"),d=[].slice.call(b).map(function(b){return{src:void 0===
a(b).attr("src")?"-":a(b).attr("src"),type:void 0===a(b).attr("type")?"-":a(b).attr("type"),async:void 0===a(b).attr("async")?"-":a(b).attr("async"),charset:void 0===a(b).attr("charset")?"-":a(b).attr("charset"),defer:void 0===a(b).attr("defer")?"-":a(b).attr("defer")}}),b=0;b<d.length;b++){var e=d[b];c.append("<tr>"+("-"===e.src?"<td>inline-script</td>":"<th><a href='"+e.src+"' >"+e.src+"</a></th>")+"<td>"+e.type+"</td><td>"+e.async+"</td><td>"+e.charset+"</td><td>"+e.defer+"</td></tr>")}a(".links-panel .script-section .script-links-val").text("["+
d.length+"]")}catch(h){console.log("ERROR(htmAnalysis.setScriptSection()): "+h)}}function J(){try{var c=a(".links-panel table.link-table-links tbody");c.find("tr").remove();for(var b=document.getElementsByTagName("link"),d=[].slice.call(b).map(function(b){return{href:void 0===a(b).attr("href")?"-":a(b).attr("href"),type:void 0===a(b).attr("type")?"-":a(b).attr("type"),media:void 0===a(b).attr("media")?"-":a(b).attr("media"),rel:void 0===a(b).attr("rel")?"-":a(b).attr("rel"),crossorigin:void 0===a(b).attr("crossorigin")?
"-":a(b).attr("crossorigin")}}),b=0;b<d.length;b++){var e=d[b];c.append("<tr><th>"+b+"</th><td><a href='"+e.href+"' >"+e.href+"</a></td><td>"+e.type+"</td><td>"+e.media+"</td><td>"+e.rel+"</td><td>"+e.crossorigin+"</td></tr>")}a(".links-panel .link-section .link-links-val").text("["+d.length+"]")}catch(h){console.log("ERROR(htmAnalysis.setLinksSection()): "+h)}}function K(){try{var c=a(".links-panel table.iframe-table-links tbody");c.find("tr").remove();for(var b=document.getElementsByTagName("iframe"),
d=[].slice.call(b).map(function(b){return{src:void 0===a(b).attr("src")?"-":a(b).attr("src"),width:void 0===a(b).attr("width")?"-":a(b).attr("width"),height:void 0===a(b).attr("height")?"-":a(b).attr("height"),name:void 0===a(b).attr("name")?"-":a(b).attr("name"),sandbox:void 0===a(b).attr("sandbox")?"-":a(b).attr("sandbox")}}),b=0;b<d.length;b++){var e=d[b];c.append("<tr><th>"+b+"</th><td><a href='"+e.src+"' >"+e.src+"</a></td><td>"+e.width+"</td><td>"+e.height+"</td><td>"+e.name+"</td><td>"+e.sandbox+
"</td></tr>")}a(".links-panel .iframe-section .iframe-links-val").text("["+d.length+"]")}catch(h){console.log("ERROR(htmAnalysis.setIFrameSection()): "+h)}}function A(d){try{d?(c.mainPanel.addClass("invisible-item"),a(c.cssClassHub+c.activePanel).removeClass("invisible-item"),c.toolBarStandard.removeClass("invisible-item"),c.toolBarAnalys.addClass("invisible-item")):(a(c.cssClassHub+c.activePanel).addClass("invisible-item"),c.mainPanel.removeClass("invisible-item"),c.toolBarAnalys.removeClass("invisible-item"),
c.toolBarStandard.addClass("invisible-item"))}catch(b){console.log("htmAnalysis.showAnalysisPanel(): "+b)}}function C(a,b){try{c.hubTitleElm.text(a),c.subTitleElm.text(b)}catch(d){console.log("ERROR(htmAnalysis.setUIEvents()): "+d)}}function L(){try{c.toolBarItem.click(w),a(document).on("click","#btn-run-content-analysis",f),a("#th-input-exclude-words").keyup(function(b){13==b.keyCode&&f(b)}),a(document).on("click","#btn-run-ul-analysis",e),a("#th-input-url-analysis").keyup(function(b){13==b.keyCode&&
e(b)}),a(document).on("click",".analysis-content-menu ul li span",h),a(document).on("click","#btn-close-clean-text-section",d),a(document).on("click","#btn-close-raw-text-section",l),a(document).on("click",".analysis-panel .tools-expander .btn-expander",k)}catch(p){console.log("ERROR(htmAnalysis.setUIEvents()): "+p)}}var c,n=u.prototype;n.Initialize=function(){try{c.commonHub.removeMainMenuItem(c,"html-analysis");this.initHub();c.commonHub.setHubPosition(c);ctrlHtmlAnalysis||(ctrlHtmlAnalysis=new th.next.htmAnalysisController);
L();try{c.pageInfoItem.find(".document_title").text(document.title);c.pageInfoItem.find(".document_last_modified").text(document.lastModified);var a=window.document.getElementsByTagName("*");c.pageInfoItem.find(".all_html_tags").text(a.length);c.pageInfoItem.find(".document_cookie").text(""===document.cookie?"-":document.cookie.split(" ").length);c.pageInfoItem.find(".document_doctype").text(document.doctype?document.doctype:"-");c.pageInfoItem.find(".document_forms").text(0===document.forms.length?
"-":document.forms.length);c.pageInfoItem.find(".document_images").text(0===document.images.length?"-":document.images.length);c.pageInfoItem.find(".document_input_encoding").text(document.inputEncoding);c.pageInfoItem.find(".document_links").text(0===document.links.length?"-":document.links.length);c.pageInfoItem.find(".document_scripts").text(0===document.scripts.length?"-":document.scripts.length);c.pageInfoItem.find(".document_referrer").text(""===document.referrer?"-":document.referrer);var b=
document.location;c.pageInfoItem.find(".doc_loc_host").text(""===b.host?"-":b.host);c.pageInfoItem.find(".doc_loc_hostname").text(""===b.hostname?"-":b.hostname);c.pageInfoItem.find(".doc_loc_href").text(""===b.href?"-":b.href);c.pageInfoItem.find(".doc_loc_origin").text(""===b.origin?"-":b.origin);c.pageInfoItem.find(".doc_loc_pathname").text(""===b.pathname?"-":b.pathname);c.pageInfoItem.find(".doc_loc_port").text(""===b.port?"-":b.port);c.pageInfoItem.find(".doc_loc_protocol").text(""===b.protocol?
"-":b.protocol)}catch(d){console.log("htmAnalysis.setPageInfo(): "+d)}c.hubStatus=statusHub.initialized;D(!1)}catch(e){console.log("ERROR(htmAnalysis.Initialize())"+e)}};n.setPageElements=function(){try{this.hub=a(this.cssClassHub),this.pageInfo=a(this.cssClassHub+" .general-page-info"),this.pageInfoItem=a(this.cssClassHub+" .general-page-info .ncl-page-item"),this.toolBar=a(this.cssClassHub+" ul.th-ul-main-menu"),this.toolBarItem=a(this.cssClassHub+" ul.th-ul-main-menu li"),this.toolBarAnalys=a(this.cssClassHub+
" ul.th-ul-main-menu .analyses-menu"),this.toolBarStandard=a(this.cssClassHub+" ul.th-ul-main-menu .standard-menu"),this.toolTipFooter=a(this.cssClassHub+" .th-footer"),this.mainPanel=a(this.cssClassHub+" .th-analysis-content"),this.hubTitleElm=a(this.cssClassHub+" .th-cover .th-article .th-title"),this.subTitleElm=a(this.cssClassHub+" .th-cover .th-article .sub-title"),this.hubTitleVal=this.hubTitleElm.text(),this.subTitleVal=this.subTitleElm.text()}catch(c){console.log("ERROR(htmlAnalysis.setPageElements())"+
c)}};n.refreshUI=function(){};n.initHub=function(){c.commonHub.initHub(c)};n.onMainMenuAction_Click=function(a){c.commonHub.onMainMenuAction_Click(c,a)};n.fromHubToHub=function(a,b){c.commonHub.fromHubToHub(c,a,b)};n.hubShow=function(a){c.commonHub.hubShow(c,a);c.hubStatus=c.hubStatus<statusHub.active?statusHub.active:c.hubStatus};n.hubRemove=function(){c.commonHub.hubRemove.call(this)};n.showProgressBar=function(a){c.commonHub.showProgressBar(c,a)};n.getHubStatus=function(a){return c.hubStatus};
n.showToolTip=function(a,b){try{b?(c.toolTipFooter.css("display","block"),c.toolTipFooter.find(".footer-tool-tip").html(a)):c.toolTipFooter.css("display","none")}catch(d){console.log("ERROR(htmAnalysis.showToolTip())"+d)}};n.onHome=function(){try{c.hub.css("width","330px");A(!1);try{if(" .links-panel"===c.activePanel){var d=a(".links-panel table.href-table-links tbody");d.find("tr").remove();d=a(".links-panel table.img-table-links tbody");d.find("tr").remove();d=a(".links-panel table.video-table-links tbody");
d.find("tr").remove();d=a(".links-panel table.script-table-links tbody");d.find("tr").remove();d=a(".links-panel table.link-table-links tbody");d.find("tr").remove();d=a(".links-panel table.iframe-table-links tbody");d.find("tr").remove()}}catch(b){console.log("htmAnalysis.cleanDataSection(): "+b)}C(c.hubTitleVal,c.subTitleVal)}catch(e){console.log("htmAnalysis.onHome(): "+e)}};n.onLab=function(){try{isDefine(c.dlgLabAnalysis)||(c.dlgLabAnalysis=new th.next.AnalysisLabDialog,c.dlgLabAnalysis.parentWnd=
c),c.dlgLabAnalysis.OpenDlg(c.cssClassHub)}catch(a){console.log("htmAnalysis.onLab(): "+a)}};n.onTagAnalysis=function(){try{c.activePanel=" .tags-panel";c.hub.css("width","420px");A(!0);try{var d=a(".tags-panel table tbody");d.find("tr").remove();ctrlHtmlAnalysis.getHtmlTagsAndClasses();for(var b=ctrlHtmlAnalysis.getHtmlTags(),b=ctrlHtmlAnalysis.frequencyWords(b),e=0;e<b.length;e++){var h=b[e],k=a("<tr><th>"+e+"</th><td>&#60;&#47;"+h.name+"&#62;</td><td>"+h.count+"</td><td>"+h.freq+"</td></tr>");
d.append(k)}}catch(l){console.log("ERROR(htmAnalysis.setTagsInfo()): "+l)}C("Tags on Page","all type of tags on current web page")}catch(f){console.log("htmAnalysis.onTagAnalysis(): "+f)}};n.onContentAnalysis=function(){try{c.activePanel=" .content-panel",A(!0),t(function(a,c,d){a||B(c,d)}),C("Content analysis","frequency of words")}catch(a){console.log("htmAnalysis.onContentAnalysis(): "+a)}};n.onLinksAnalysis=function(){try{c.activePanel=" .links-panel";c.hub.css("width","690px");A(!0);try{var a=
document.cloneNode(!0),b=a.querySelector(".th-node");b.parentNode.removeChild(b);F();G(a);H(a);I();J();K()}catch(d){console.log("ERROR(htmAnalysis.setLinksInfo()): "+d)}C("Links on Page","href, images, video, iframe, css, links")}catch(e){console.log("htmAnalysis.onLinksAnalysis(): "+e)}};n.onScriptAnalysis=function(){try{c.activePanel=" .script-panel",A(!0)}catch(a){console.log("htmAnalysis.onScriptAnalysis(): "+a)}};n.onRawContent=function(){try{v(!1),a(".raw-text-section").css("display","block")}catch(c){console.log("htmAnalysis.onRawContent(): "+
c)}};n.onCleanContent=function(){try{if(v(!1),a(".clean-text-section").css("display","block"),c.activeUrl!==document.location.href){var d=x(c.activeUrl);a(".content-attributes .attribute-value").text(d.url);a("#edit-clean-content").text(d.text)}else a(".content-attributes .attribute-value").text(c.localPageData.url),a("#edit-clean-content").text(c.localPageData.text)}catch(b){console.log("htmAnalysis.onCleanContent(): "+b)}};return u}(thJQ);
th.next.AnalysisLabDialog=function(a){function u(){f=this;this.rssAgentTemplate=null;this.dlgShown=!1;this.parentWnd=null;this.Initialize()}function w(a){try{return a.preventDefault(),f.dialogCtrl.hasClass("invisible-item")||(f.dialogCtrl.addClass("invisible-item"),f.dlgShown=!1),!1}catch(d){return console.log("SearchAgentsDialog.onCloseDld_Click(): "+d),!1}}var f,h=u.prototype;h.Initialize=function(){try{f.dialogCtrl=a("#th-dlg-template-show-lab");try{a(document).on("click","#close-analysis-lab-dlg",
w)}catch(e){console.log("SearchAgentsDialog.setUIEvents(): "+e)}}catch(d){console.log("ERROR(SearchAgentsDialog.Initialize())"+d)}};h.OpenDlg=function(a){try{f.parentHub=a,f.dlgShown||(f.dialogCtrl.removeClass("invisible-item"),f.dlgShown=!0)}catch(d){console.log("SearchAgentsDialog.OpenDlg(): "+d)}};return u}(thJQ);
th.next.htmAnalysisController=function(a){function u(){w=this;this.Initialize()}var w,f=u.prototype;f.Initialize=function(){};f.getPureTextPerUrl=function(a,e){try{var d=JSON.stringify({url:a});ajaxCall(pathServer+"get-text-per-url","get-text-per-url="+d,function(a,d,h){d=JSON.parse(a);return e(d.err,a)},function(a,d,h){return e(!0,null)})}catch(l){console.log("ERROR(AnalysisController.getHtmlTagsAndClasses())"+l)}};f.hasElement=function(a,e,d){for(var l=0;l<a.length;l++)if(a[l][e]===d)return l;return-1};
f.getHtmlTagsAndClasses=function(){try{for(var h=window.document.getElementsByTagName("*"),e=[],d=0;d<h.length;d++){var l=h[d],k=a(l).attr("class"),f=l.tagName.toLowerCase(),r=w.hasElement(e,"tag",f);if(-1===r)e.push({tag:f,cls:k?[].slice.call(l.classList):[]});else if(k)for(var s=e[r],z=k.split(" "),t=0;t<z.length;t++)-1===s.cls.indexOf(z[t])&&s.cls.push(z[t])}return e}catch(v){console.log("ERROR(AnalysisController.getHtmlTagsAndClasses())"+v)}};f.getHtmlTags=function(){try{var a=window.document.getElementsByTagName("*");
return a=[].slice.call(a).map(function(a){return a.tagName.toLowerCase()})}catch(e){console.log("ERROR(AnalysisController.getHtmlTags())"+e)}};f.getAllHtmlLinks=function(){};f.getHtmlContent=function(){try{var h=a("html").clone(),e=a(h).find("script,noscript,style").remove().end(),d=a(e).find(".th-node").remove().end().html();return a(d).text()}catch(l){console.log("ERROR(AnalysisController.getHtmlContent())"+l)}};f.cleanFromPunctuation=function(a){try{var e=a.toLowerCase().trim().split(" "),d="[.,-\\/:{}]?\u2013#@+!$%^&*;\u00ab\u00bb-_\u2014`\"'~()|\u2192\u2193\u2191".split(""),
e=e.map(function(a){return a.split("").map(function(a){for(var e=0;e<d.length;e++)if(a===d[e])return" ";return a}).join("").trim()});return e=e.filter(function(a){return""===a?!1:!0})}catch(l){console.log("ERROR(AnalysisController.cleanFromPunctuation())"+l)}};f.removeHtmlSection=function(h,e,d){try{a(h).find("script").remove()}catch(l){console.log("ERROR(AnalysisController.removeHtmlSection())"+l)}};f.frequencyWords=function(a){try{for(var e={},d=a.length,l=0;l<d;l++){var k=a[l];e[k]=k in e?++e[k]:
1}a=[];for(k in e){var f=e[k],r={name:k,count:f,freq:(100*f/d).toFixed(1)};a.push(r)}a.sort(function(a,d){return d.freq-a.freq});return a}catch(s){console.log("ERROR(AnalysisController.frequencyWords())"+s)}};f.removeEditingCharacters=function(a){try{return a=a.replace(/(\r\n|\n|\r)/g," "),a=a.replace(/\s+/g," "),a=a.trim()}catch(e){return console.log("ERROR(AnalysisController.removeEditingCharacters())"),null}};f.removeRussianPrepositions=function(a){try{var e="\u0430 \u044f \u043e\u043d \u044d\u0442\u043e \u043f\u0440\u043e \u0435\u0433\u043e \u0438 \u0441 \u0432 \u043d\u0435 \u0447\u0442\u043e \u044d\u0442\u043e\u0442 \u0442\u043e\u043c \u043d\u043e \u0432\u043e \u0434\u043b\u044f \u043d\u0430\u0441 \u043c\u044b \u0434\u043e \u0437\u0430 \u0438\u0437 \u0438\u0437\u043e \u043a \u043a\u043e \u043c\u0435\u0436 \u043d\u0430 \u043d\u0430\u0434 \u043e \u043e\u0431 \u043e\u0442 \u043f\u043e \u0443 \u0441\u043e \u0442.\u0435 \u043b\u0438 \u0438\u043b\u0438 \u0442.\u0434.".split(" ");
return a.split(" ").filter(function(a){for(var d=0;d<e.length;d++)if(a===e[d])return!1;return!0}).join(" ")}catch(d){return console.log("ERROR(AnalysisController.removePrepositions())"),null}};f.shuffle=function(a){try{for(var e=[];;){for(var d=a.slice(),f=[],k=1;d.length;){var q=Math.floor(e.length/k)%d.length,k=k*d.length;f.push(d.splice(q,1)[0])}e.push(f);if(e.length==k)return e}}catch(r){return console.log("ERROR(AnalysisController.shuffle())"),null}};f.phrasesFromWords=function(a){try{for(var e=
[],d=0;d<a.length;d++){var f;var k=a[d];try{for(var q=[],r=0;r<k.length;r++)for(var s=k[r],u=s,t=0;t<k.length;t++){var v=k[t];u!=v&&(s+=" "+v,q.push(s))}f=q}catch(w){console.log("ERROR(AnalysisController.createPhrase())"),f=null}for(q=0;q<f.length;q++){var x=f[q];0>e.indexOf(x)&&e.push(x)}}return e}catch(B){return console.log("ERROR(AnalysisController.phrasesFromWords())"),null}};f.frequencyPhrases=function(a,e){try{for(var d=[],f=0;f<e.length;f++){for(var k=e[f],q=a.indexOf(k),r=0;-1<q;)r++,q=a.indexOf(k,
q+1);0<r&&d.push({phrase:k,frequency:r})}return d}catch(s){return console.log("ERROR(AnalysisController.frequencyPhrases())"),null}};return u}(thJQ);
