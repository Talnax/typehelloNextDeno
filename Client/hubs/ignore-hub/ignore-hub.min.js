var th=th||{};th.next=th.next||{};
th.next.IgnoreHub=function(d){function h(){a=this;this.cssClassHub=".ignore-hub";this.hubStatus=statusHub.not_active;this.usrTemplate=this.userPerClick=null;this.feedbackClass=".ignore-hub-dlg-feedback";this.commonHub=new th.next.CommonHub(this);this.Initialize()}function g(b){try{b.preventDefault();var l=b.target,c=l.getAttribute("data-action");l.getAttribute("data-template-dlg");"function"===typeof a[c]&&"readAllIgnores"===c&&(d("#ignore-list-view-ctrl li").remove(),ctrlIgnore=null,a[c]());return!1}catch(f){return console.log("IgnoreHub.onIgnoreMainMenu_Click(): "+
f),!1}}function e(b){try{b.preventDefault();a.userPerClick=getUserPerDataTemplate("ignore-list-view-item-template",b);var f=getUser(),e=b.target.title,k=d(this).closest(".ignore-list-view-item-template")[0].parentNode;d("#ignore-list-view-ctrl > li").index(this);switch(e){case "remove":c(f,k,a.userPerClick)}return!1}catch(p){return console.log("ERROR(IgnoreHub.onUserAction_Click()): "+p),!1}}function c(b,c,f){try{ctrlIgnore||(ctrlIgnore=new th.next.IgnoreController),ctrlIgnore.removeIgnore(b,a.userPerClick,
function(a,b,e){"object"===typeof JSON.parse(a)&&(d(c).remove(),ctrlIgnore.removeFromArray(f))},function(a,b,c){console.log("ERROR[IgnoreHub->ctrlIgnore.removeIgnore()]: "+c)})}catch(e){console.log("ERROR(IgnoreHub.actionRemoveUser())"+e)}}function k(b,c){try{if(isDefine(c)){if(!a.usrTemplate){var f=d("#ignore-item-template").html();a.usrTemplate=d(f)}if(0!=a.usrTemplate.length){var e=c.ignore,k=c.ignoreDate,g=JSON.stringify(e);d(a.usrTemplate).find(".template-data span").text(g);d(a.usrTemplate).find(".template-date span").text(k);
var h=getStrUserShortProfile(e);d(a.usrTemplate).find(".template-text span").text(h);d(a.usrTemplate).find(".template-nick span").text(e.nick);var m=d(a.usrTemplate).find(".template-image");a.commonHub.setUserIcon(m,e);var q=a.usrTemplate[0].outerHTML.replace("template-item","");d("#ignore-list-view-ctrl").append("<li>"+q+"</li>");m[0].removeAttribute("style")}}}catch(r){console.log("ERROR(IgnoreHub.bindDataTemplateValues())"+r)}}var a,f=h.prototype;f.Initialize=function(){try{a.commonHub.removeMainMenuItem(a,
"ignores");this.initHub();a.commonHub.setHubPosition(a);try{d(document).on("click",".ignore-hub .th-user-actions li",e),d(document).on("click",".ignore-hub ul.th-ul-main-menu li",g)}catch(b){console.log("ERROR(IgnoreHub.setUIEvents()): "+b)}a.hubStatus=statusHub.initialized}catch(c){console.log("ERROR(IgnoreHub.Initialize())"+c)}};f.readAllIgnores=function(){try{var b=getUser();if(isDefine(b)){var c=function(b,c,e){a.showProgressBar(!1);a.hubStatus=statusHub.data_loaded;if(isJsonData(b)&&(b=JSON.parse(b),
"object"===typeof b.param)){ctrlIgnore.listIgnore=b.param;for(b=0;b<ctrlIgnore.listIgnore.length;b++)k(b,ctrlIgnore.listIgnore[b]);return}a.commonHub.showInfoDlg(a,".ignore-hub-dlg-info","You don't have any -ignores- yet",function(a){})},e=function(b,c,e){console.log("ERROR[IgnoreHub->ctrlIgnore.readIgnores()]: "+e);a.showProgressBar(!1);a.hubStatus=statusHub.data_loaded_err};ctrlIgnore?0===ctrlIgnore.listIgnore.length?a.commonHub.showInfoDlg(a,".ignore-hub-dlg-info","You don't have any -ignores- yet",
function(a){}):a.refreshUI():(ctrlIgnore=new th.next.IgnoreController,a.showProgressBar(!0),ctrlIgnore.readIgnores(b,c,e))}}catch(f){console.log("ERROR(IgnoreHub.readAllIgnores())"+f)}};f.refreshUI=function(){try{d("#ignore-list-view-ctrl li").remove();for(var a=0;a<ctrlIgnore.listIgnore.length;a++)k(a,ctrlIgnore.listIgnore[a])}catch(c){console.log("ERROR(IgnoreHub.refreshUI())"+c)}};f.initHub=function(){a.commonHub.initHub(a)};f.onMainMenuAction_Click=function(b){a.commonHub.onMainMenuAction_Click(a,
b)};f.fromHubToHub=function(b,c){a.commonHub.fromHubToHub(a,b,c)};f.hubShow=function(b){a.commonHub.hubShow(a,b);a.hubStatus=a.hubStatus<statusHub.active?statusHub.active:a.hubStatus};f.hubRemove=function(){a.commonHub.hubRemove.call(this)};f.showProgressBar=function(b){a.commonHub.showProgressBar(a,b)};f.getHubStatus=function(b){return a.hubStatus};return h}(thJQ);
th.next.IgnoreController=function(d){function h(){g=this;this.listIgnore=[];this.Initialize()}var g;d=h.prototype;d.Initialize=function(){};d.addIgnore=function(e,c,d,a){try{if(isDefine(e)&&isDefine(c)&&isDefine(d)&&isDefine(a)){var f=getUserId(e),b=getUserProfile(c),l=getCurrentDate();e={user:f,ignores:[{ignore:b,ignoreDate:l,ignoreWhy:"why ignore explanation values"}]};g.listIgnore.push(e.ignores[0]);isDefine(b.pic)&&""!==b.pic&&(e.ignores[0].ignore.pic=encodeURIComponent(b.pic));var h=JSON.stringify(e);
ajaxCall(pathServer+"add-ignore","add-ignore="+h,d,a)}}catch(n){console.log("ERROR(IgnoreController.AddIgnoreUser())"+n)}};d.readIgnores=function(e,c,d){try{if(isDefine(e)&&isDefine(c)&&isDefine(d)){var a=JSON.stringify({user:{id:e.id}});ajaxCall(pathServer+"read-ignores","read-ignores="+a,c,d)}}catch(f){console.log("ERROR(IgnoreController.readIgnores())"+f)}};d.getAllIgnores=function(e,c){try{if(!(0<g.listIgnore.length)&&isDefine(e)){var d=JSON.stringify({user:{id:e.id}});ajaxCall(pathServer+"read-ignores",
"read-ignores="+d,function(a,b,e){if(isJsonData(a)&&(a=JSON.parse(a),"object"===typeof a.param)){g.listIgnore=a.param;sendCallBack(c(g.listIgnore));return}sendCallBack(c(-1))},function(a,b,e){console.log("ERROR[IgnoreHub->ctrlIgnore.getAllIgnores()]: "+e);sendCallBack(c(-1))})}}catch(a){console.log("ERROR(IgnoreController.readIgnores())"+a)}};d.removeIgnore=function(e,c,d,a){try{if(isDefine(e)&&isDefine(c)&&isDefine(d)&&isDefine(a)){var f=getUserId(e),b=getUserProfile(c);isDefine(b.pic)&&""!==b.pic&&
(b.pic=encodeURIComponent(b.pic));var g=JSON.stringify({user:f,removeUser:b});ajaxCall(pathServer+"remove-ignore","remove-ignore="+g,d,a)}}catch(h){console.log("ERROR(IgnoreController.removeIgnore())"+h)}};d.removeFromArray=function(e){try{for(var c=0;c<g.listIgnore.length;c++)if(g.listIgnore[c].ignore.id===e.id){g.listIgnore.splice(c,1);break}}catch(d){console.log("ERROR(IgnoreController.removeFromArray())"+d)}};d.isUserIgnore=function(e){try{for(var c=0;c<g.listIgnore.length;c++)if(g.listIgnore[c].ignore.id===
e.id)return!0;return!1}catch(d){return console.log("ERROR(IgnoreController.isUserIgnore())"+d),!1}};return h}(thJQ);
