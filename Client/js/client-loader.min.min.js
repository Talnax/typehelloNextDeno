var thJQ=null;function isDefine(b){return"undefined"!==typeof b&&null!==b?!0:!1}function isScriptAlreadyIncluded(b){for(var c=document.getElementsByTagName("script"),a=0;a<c.length;a++)if(c[a].getAttribute("src")===b)return!0;return!1}function sendCallBack(b){"function"===typeof b&&b()}function loadCss(b,c){var a=document.getElementsByTagName("head")[0],d=document.createElement("link");d.rel="stylesheet";d.href=b;d.onload=function(){sendCallBack(c)};a.appendChild(d)}
function loadJS(b,c){"undefined"===typeof b&&null===b&&sendCallBack(c);isScriptAlreadyIncluded(b)&&sendCallBack(c);var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=b;a.addEventListener("load",function(){sendCallBack(c)},!1);document.getElementsByTagName("head")[0].appendChild(a)}function loadJQuery(b,c){loadJS(b,function(){thJQ=jQuery.noConflict();sendCallBack(c)})}
function loadJQueryUI(b,c){if("undefined"==typeof jQuery.ui)loadJS(b,function(){sendCallBack(c)});else{var a=parseInt(jQuery.ui.version.split(".").join("")),d=parseInt(versionQJUI.split(".").join(""));a<d?loadJS(b,function(){sendCallBack(c)}):sendCallBack(c)}}
function getHubFiles(b){var c="";-1===pathServer.indexOf("localhost")&&(c=".min");var c=pathServer+"CLIENT/hubs/"+b+"/"+b+c+".js",a=pathServer+"CLIENT/hubs/"+b+"/"+b+".html",d=[];d.push(pathServer+"CLIENT/hubs/"+b+"/"+b+".css");d.push(c);d.push(a);return d}
function getHub(b,c,a){function d(a){a=JSON.parse(a);"[object Array]"!==Object.prototype.toString.call(a)&&(a=a.data);for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return thJQ.parseHTML(b)[0]}if(!b[0])return a(null);loadCss(b[0],function(){if(!c&&!b[2])return a(null);thJQ.ajax({url:b[2],contentType:"application/json",data:{},dataType:"jsonp",success:function(c,f,h){var g=d(c);null!==g&&b[1]&&loadJS(b[1],function(){sendCallBack(a(g))})},error:function(b,c,d){console.log("ERROR[hubLoadHtml]: "+
d);sendCallBack(a(null))}})})}function parseHtmlContent(b,c){var a=JSON.parse(b);"[object Array]"!==Object.prototype.toString.call(a)&&(a=a.data);var d="",e;for(e in a)a.hasOwnProperty(e)&&(d+=String.fromCharCode(a[e]));var a=thJQ.parseHTML(d),f;for(f in a)a.hasOwnProperty(f)&&(isDefine(a[f].tagName)||a.splice(f,1));sendCallBack(c(a))}
function loadHtml(b,c,a){thJQ.ajax({url:b,contentType:"application/json",data:{},dataType:"jsonp",success:function(b,e,f){c(b,function(b){thJQ(".th-node").append(b);sendCallBack(a("ok"))})},error:function(b,c,f){console.log("ERROR[loadHtml]: "+f);sendCallBack(a("fail"))}})}function loadHub(b,c){var a="ok",d=thJQ(".th-node ."+b);isDefine(d[0])?sendCallBack(c(a)):(d=getHubFiles(b),getHub(d,b,function(b){b?thJQ(".th-node").append(b):a="false";sendCallBack(c(a))}))}
function progressLoadText(b){var c=document.getElementsByClassName("th-loader-txt")[0];c&&(c.innerHTML="",c.innerHTML=b)}function hideProgressCtrl(){thJQ(".th-loader-logo").css("display","none");thJQ(".th-loader-img").css("display","none");thJQ(".th-loader-panel").css("display","none");thJQ(".th-loader-txt").css("display","none")}
function initTH(){var b=document.createElement("div");b.className="th-node";document.body.appendChild(b);loadHtml(pathServer+"CLIENT/html/templates.html",parseHtmlContent,function(b){"ok"===b&&loadHub("login-hub",function(a){"ok"===a&&(hubLogIn||(hubLogIn=new th.next.LoginHub),hideProgressCtrl(),hubLogIn.hubShow(!0))})})}function loadArrayJS(b,c,a){loadJS(b[c],function(){++c;c>b.length-1?sendCallBack(a):loadArrayJS(b,c,a)})}
function loaderPanel(){var b,c,a,d;b="undefined"!==window.pageYOffset?window.pageYOffset:document.body.scrollTop;c=window.innerWidth;d=window.innerHeight;a=document.createElement("div");a.className="th-loader-panel";a.setAttribute("style","background:rgba(0,0,0,0.6);z-index:9999;height:"+d+"px;width:"+c+"px;left:0px;top:"+b+"px;position:absolute;");document.body.appendChild(a);a=document.createElement("img");a.className="th-loader-logo";a.src=pathServer+pathClient+"img/th-logo-48.png";a.setAttribute("style",
"z-index:9999;left:"+(c/2-6)+"px;top:"+parseInt(b+d/2-80)+"px;position:absolute;width:36px");document.body.appendChild(a);a=document.createElement("img");a.className="th-loader-img";a.src=pathServer+pathClient+"img/ajax-loader.gif";a.setAttribute("style","z-index:9999;left:"+c/2+"px;top:"+parseInt(b+d/2)+"px;position:absolute;width:27px");document.body.appendChild(a);a=document.createElement("div");a.className="th-loader-txt";a.innerHTML="Load service styles ...";a.setAttribute("style","color:#F0F0F0;font-size:15px;z-index:9999;left:"+
parseInt(c/2-69)+"px;top:"+parseInt(b+d/2-36)+"px;position:absolute;width:45px;width:210px;");document.body.appendChild(a)}
function thMain(){loaderPanel();var b=pathServer+"CLIENT/css/general.css",c=pathServer+"CLIENT/css/glyphs.css",a=pathServer+"CLIENT/lib/jquery-1.10.2.js",d=pathServer+"CLIENT/lib/jquery-ui-1.10.3.custom.min.js",e=".min";-1!==pathServer.indexOf("localhost")&&(e="");var f=[pathServer+"socket.io/socket.io.js",pathServer+"CLIENT/js/client-common"+e+".js",pathServer+"CLIENT/js/common-hub"+e+".js",pathServer+"CLIENT/js/controller-settings"+e+".js",pathServer+"SHARE/user-definition"+e+".js",pathServer+"SHARE/socket-events"+
e+".js"];loadCss(b,function(){loadCss(c,function(){progressLoadText("Load service library ...");loadJQuery(a,function(){loadJQueryUI(d,function(){progressLoadText("Load service modules ...");loadArrayJS(f,0,function(){initTH()})})})})})}var pathClient="CLIENT/",pathServer="http://52.53.223.73:1337/",versionQJUI="1.10.2";
